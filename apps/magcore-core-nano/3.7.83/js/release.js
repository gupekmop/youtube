
!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1),i=n(2),s=n(11),a=n(19),r=n(21),c=n(27),p=o(document.location.search.substring(1)),l=n(23),u=n(25),d=n(9),h=[],f={};n(15),n(29),n(32),window.MODE_PORTAL=!1,window.MODE_STALKER=!1,window.extendCorePrototype("Storage",d),l.init(),window.getCoreInstance=window.getCoreInstanse=function(e){var t=i.getInstance(e);return t.widget=c,t.system=!0,t.packages=h,t.packageMap=f,t.taskManager=s,t.updatePackages=function(e){h=e,f={},h.forEach(function(e){f[e.packageName]=e})},t.reload=function(e){d.fflush(),n(33).reload(e)},t.reboot=function(){d.fflush(),n(33).reboot()},t},window.system=window.core=window.getCoreInstance(window),window.system.queryParameters=p,window.core.storage=new window.core.constructor.prototype.Storage("magcore-core"),window.addEventListener("keydown",function(e){var t,o=n(14);0!==e.keyCode&&(9===e.keyCode&&e.preventDefault(),t="keydown:"+n(26)(e),o(t,e))}),r.load(p,function(e){var t,o,i,c,l,d=-1,w=null,m={};if(e)return window.splash=document.body.appendChild(document.createElement("div")),window.splash.style.backgroundColor="#1B5E20",window.splash.style.overflow="scroll",window.splash.innerHTML='<pre tabindex="1" style="padding: 40px; overflow-y: scroll; height: '+screen.height+"px; width: "+screen.width+'px;font-family: monospace;font-size: 16px; text-align: left;padding: 10px;color: #fff;">'+e+"\nCore Panic: Fatal Exception</pre>",window.splash.firstChild.focus(),void 0;for(d=0;d<r.data.apps.length;d++)if("launcher"===r.data.apps[d].type){window.splash.className="container",u.show(r.data.apps[d]),p.buildDate&&(window.splashAppVersion.innerText=p.buildDate);break}for(d=-1,p.backendHost&&(r.data.options.stalkerHost=p.backendHost,r.data.options.stalkerApiPath="/stalker_portal/api/v3/",r.data.options.stalkerAuthPath="/stalker_portal/auth/token.php",r.data.options.pingTimeout=12e4,r.data.options.stalkerLoaderPath="/stalker_portal/c/",r.data.options.sap=p.backendHost+"/stalker_portal/server/api/sap.php"),core.config=r.data,o=r.data.apps.length-1,n(8).basePath=r.data.options.pluginsPath,window.core.dependencyManager=n(8),window.extendCorePrototype("theme",{path:r.data.theme,vars:r.data.themeVars}),window.extendCorePrototype("themes",r.data.themes);d<o;){switch(++d,c=r.data.apps[d].packageName,r.data.apps[d].type){case"auth":w=r.data.apps[d];break;case"plugin":r.data.apps[d].daemon&&(m[r.data.apps[d].packageName]=r.data.apps[d].version);default:h.push(JSON.parse(JSON.stringify(r.data.apps[d]))),f[c]=h[h.length-1]}a.resolveActionsConfig(r.data.apps[d])}if(n(8).load({dependencies:m,dependencyReady:function(e,t){if(!e)return"function"==typeof t.instance.onInit?void(t.daemonLoaded||(t.daemonLoaded=!0,t.instance.onInit({storage:n(8).getPluginStorage(t.name),options:t.options,path:t.path},function(e,t){e||"object"!=typeof t||"function"!=typeof t.emit||s.daemons.push(t)}))):void 0}}),s.init(),null===w)s.daemons.forEach(function(e){e.emit("system:start")}),n(34);else{switch(t=window.innerHeight||window.screen.height){case 480:case 576:case 720:case 1080:break;default:t=720}i=document.createElement("link"),i.rel="stylesheet",i.href=window.core.theme.path+t+".css",document.head.appendChild(i),l=s.runApp({config:w,visible:!0,onready:function(){},onload:function(){}}),l.core.once("ready",function(e){e=e||{},e.stop||(s.daemons.forEach(function(e){try{e.emit("system:start")}catch(e){}}),l.$iframe.hide(),l.core.emit("hide",{source:window.core.SOURCES.SYSTEM}),n(34))}),l.core.once("show",u.init)}}),window.addEventListener("unload",function(){l.unload&&l.unload()}),window.addEventListener("focus",function(){s.topApp?s.topApp.$iframe.contentWindow.focus():s.focusedApp?s.focusedApp.$iframe.contentWindow.focus():s.launcher&&s.launcher.$iframe.contentWindow.focus()}),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&(s.topApp?(s.topApp.$iframe.contentWindow.focus(),s.topApp.core.emit("focus")):s.focusedApp?(s.focusedApp.$iframe.contentWindow.focus(),s.focusedApp.core.emit("focus")):s.launcher&&(s.launcher.$iframe.contentWindow.focus(),s.launcher.core.emit("focus")))}),window.core.environment.debug&&window.core.addListener("keydown:68ca",function(){var e=window.top.location,t=e.pathname.replace("index.html","debug.html"),n=new XMLHttpRequest;t=t.replace("develop.html","debug.html"),t.indexOf("debug.html")===-1&&(t+="debug.html"),n.open("GET",e.protocol+"//"+e.host+t+e.search+e.hash),n.onload=function(){200===this.status&&(window.top.location.href=e.protocol+"//"+e.host+t+e.search+e.hash)},n.send()})},function(e,t){"use strict";e.exports=function(e){var t={};return e.split("&").forEach(function(e){e=e.split("="),2===e.length&&(t[e[0]]=decodeURIComponent(e[1]))}),t}},function(e,t,n){"use strict";var o=n(3);e.exports={coreList:[],windowList:[],windowToCoreMap:{},core:{},getInstance:function(e){var t,n=this,i=n.windowList.indexOf(e);return i===-1?(t=new o,t.addListener("hide",function(){this.applicationState.visible=!1}),t.addListener("show",function(){this.applicationState.visible=!0}),t.addListener("focus",function(){this.applicationState.focused=!0}),t.addListener("blur",function(){this.applicationState.focused=!1}),Object.defineProperty(t,"index",{value:n.coreList.push(t)-1,configurable:!1,enumerable:!1,writable:!1}),n.windowToCoreMap[this.windowList.push(e)-1]=t.index):t=n.coreList[this.windowToCoreMap[i]],t},destroy:function(e){var t,n,o,i=this.windowList.indexOf(e),s=0;if(i!==-1){for(t=this.coreList[this.windowToCoreMap[i]].plugins,n=Object.keys(t),o=n.length;s<o;)"function"==typeof t[n[s]].destroy&&t[n[s]].destroy(),++s;return this.coreList[this.windowToCoreMap[i]]=void 0,this.windowToCoreMap[this.windowToCoreMap[i]]=void 0,this.windowList[i]=void 0,!0}return!1}}},function(e,t,n){"use strict";function o(e){i.call(this,e),this.plugins={},this.applicationState={focused:!1,visible:!1,home:!1}}var i=n(4),s=n(5),a={},r=[],c=document.body.appendChild(document.createElement("div")),p=function(e){e.timeout=e.timeout||5e3,e.buttons&&e.buttons[0]&&e.buttons[0].click?(e.buttons[0].click(),Array.isArray(r)&&r.length>0&&p(r.unshift())):(c.innerText=e.title,c.style.display="",setTimeout(function(){c.style.display="none",Array.isArray(r)&&r.length>0&&p(r.unshift())},e.timeout))};c.style.display="none",c.style.textAlign="center",c.style.background="#000",c.style.color="#fff",c.style.lineHeight="72px",c.style.height="auto",c.style.position="absolute",c.style.left="0",c.style.top="0",c.style.width="100%",c.style.zIndex="9999",o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.theme={path:null},o.prototype.environment=n(6),o.prototype.ready=!1,o.prototype.emit=function(){try{i.prototype.emit.apply(this,arguments)}catch(e){}},o.prototype.resolveDependencies=function(e,t){var o=this,i=[];o.ready||n(8).load({dependencies:e.dependencies,done:function(a,r){r&&r.length>0&&r.forEach(function(t){i.push(function(i){t.instance.onAppInit({app:e,options:t.options,storage:n(8).getPluginStorage(t.name),path:t.path},function(e,n){o.plugins[t.name]=n,i(e,n)})})}),s(i,t)}})},o.prototype.notify=function(e){0===r.length?p(e):r.push(e)},Object.defineProperty(a,"INTENT",{enumerable:!0,configurable:!1,writable:!1,value:1}),Object.defineProperty(a,"LAUNCHER",{enumerable:!0,configurable:!1,writable:!1,value:2}),Object.defineProperty(a,"SYSTEM",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(o.prototype,"SOURCES",{enumerable:!0,configurable:!1,writable:!1,value:a}),Object.defineProperty(a,"intent",{enumerable:!0,configurable:!1,writable:!1,value:1}),Object.defineProperty(a,"launcher",{enumerable:!0,configurable:!1,writable:!1,value:2}),Object.defineProperty(a,"system",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(o.prototype,"sources",{enumerable:!0,configurable:!1,writable:!1,value:a}),o.prototype.apiVersion=parseInt(window.gSTB.Version().split(";")[0].split(":")[1],10),window.extendCorePrototype=function(e,t){"notify"===e&&(p=r=null,c.parentNode.removeChild(c)),o.prototype[e]=t},e.exports=o},function(e,t,n){"use strict";function o(){this.events={}}o.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function o(){n.removeListener(e,o),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},o.prototype.constructor=o,e.exports=o},function(e,t){"use strict";e.exports=function(e,t){function n(n,a){var r=function(n,r){if(n)return o=!0,void("function"==typeof t&&t(n));if(s[a]=r,i++,i===e.length&&"function"==typeof t)t(null,s);else if(i>e.length)throw Error("done callback invoked more than one time in function with "+a+" position in tasks array")};o||(0===n.length?r(null,n()):n(r))}var o=!1,i=0,s=[];e=Array.isArray(e)?e:[],0===e.length?"function"==typeof t&&t(null,s):e.forEach(n)}},function(e,t,n){"use strict";var o;o=n(7),e.exports=o},function(e,t){"use strict";var n=window.gSTB.GetEnv(JSON.stringify({varList:["Image_Date","Image_Desc","Image_Version","acPassword","accessControl","audio_initial_volume","autoPowerDownTime","auto_framerate","autoupdateURL","autoupdate_cond","betaupdate_cond","controlModel","defaultLedLevel","dvb_type","front_panel","graphicres","hdmi_event_delay","lang_audiotracks","lang_subtitles","language","mount_media_ro","playerClock","settMaster","ssaverDelay","ssaverName","standByMode","standbyLedLevel","startPage","subtitlesColor","subtitlesSize","subtitles_on","syslog_srv","teletext_charset","teletext_on","teletext_opacity","teletext_ratio","ts_endType","ts_exitType","ts_icon","ts_lag","ts_on","ts_path","ts_time","tvsystem","upnp_conf","weather_conf","weather_place","audioPrimaryLanguage","audioSecondaryLanguage","subtitlesPrimaryLanguage","subtitlesSecondaryLanguage","timezone_conf","ntpurl","portal1","portal2","use_portal_dhcp","force_dvi","input_buffer_size","cec","igmp_conf","portal_dhcp","wifi_ssid","wifi_auth","wifi_enc","wifi_psk","wifi_wep_key1","wifi_int_dns","wifi_int_ip","wifi_int_mask","wifi_int_gw","mc_proxy_enabled","mc_proxy_url","lan_noip","ipaddr_conf","dnsip","pppoe_enabled","pppoe_login","pppoe_dns1","update_url","custom_url_hider","useExtPortalsPage","bootstrap_url","update_channel_url","audio_stereo_out_mode","audio_dyn_range_comp","audio_operational_mode","audio_spdif_mode","audio_hdmi_audio_mode","wifi_wep_def_key","wifi_wep_key1","wifi_wep_key2","wifi_wep_key3","wifi_wep_key4","gatewayip","lan_noip","netmask","debug","playerHardwareAcceleration"]}));try{n=JSON.parse(n),n=n.result}catch(e){n={}}n.language=n.language||"en",n.availableLanguages=[],function(){for(var e,t,o=0,i=gSTB.RDir("tempfile read languages_utf8.txt").split("\n"),s={estoninan:{code:"et",name:"Estonian (Eesti keel)"},latvian:{code:"lv",name:"Latvian (Latviešu)"}};o<i.length;)""!==i[o]&&(e=i[o].split('"'),t=decodeURIComponent(escape(e[3])),e=e[1],e===s.estoninan.code&&(s.estoninan=!1),e===s.latvian.code&&(s.latvian=!0),n.availableLanguages.push({code:e,name:t})),++o;s.latvian&&n.availableLanguages.push(s.latvian),s.estoninan&&n.availableLanguages.push(s.estoninan)}(),""===n.hdmi_event_delay&&(n.hdmi_event_delay="3",window.gSTB.SetEnv(JSON.stringify({hdmi_event_delay:"3"}))),""===n.defaultLedLevel&&(n.defaultLedLevel=10),""===n.standbyLedLevel&&(n.standbyLedLevel=100),""===n.audioPrimaryLanguage&&(n.audioPrimaryLanguage=n.language),""===n.audioSecondaryLanguage&&(n.audioSecondaryLanguage=n.language),""===n.subtitlesPrimaryLanguage&&(n.subtitlesPrimaryLanguage=n.language),""===n.subtitlesSecondaryLanguage&&(n.subtitlesSecondaryLanguage=n.language),""===n.auto_framerate&&(n.auto_framerate="Disabled"),n.onFocusDebounceTimeout=300,e.exports=n},function(e,t,n){"use strict";function o(e,t,n){var o;r[e.name]&&r[e.name].instance?(n&&n(null,r[e.name]),t(null,r[e.name])):r[e.name]&&r[e.name].loading?(null===r[e.name].dependents&&(r[e.name].dependents=[]),r[e.name].dependents.push(function(){n&&n(null,r[e.name]),t(null,r[e.name])})):(r[e.name]={loading:!0,instance:null,dependents:null,name:e.name,path:e.path,storage:new a(e.name),packageName:e.packageName},o=new XMLHttpRequest,e.url||(e.url=c.basePath+"/"+e.packageName+"/"+e.version+"/"+(e.main||"index.js")),o.open("GET",e.url,!0),o.onload=function(){var o,i,s={exports:{},id:""},a=new Function("module","exports","require",this.responseText+"//# sourceURL=file.js");if(a(s,s.exports,function(){}),window.core.plugins[e.name]=r[e.name].instance=s.exports,r[e.name].loading=!1,n&&n(null,r[e.name]),null!==r[e.name].dependents&&r[e.name].dependents.length>0)for(o=r[e.name].dependents;i=o.shift();)i();t(null,r[e.name])},o.send())}function i(e,t,n){var a,r=null;e=window.core.packageMap[e],e.dependencies&&(r=Object.keys(e.dependencies)),null!==r&&r.length>0?(a=[],r.forEach(function(e){window.core.packageMap[e]&&a.push(function(t){i(e,t,n)})}),s(a,function(){o(e,t,n)})):o(e,t,n)}var s=n(5),a=n(9),r={},c={basePath:"",load:null,getPluginStorage:function(e){return r[e].storage}};c.load=function(e){var t=[];e.dependencies?(e.dependencies=Object.keys(e.dependencies),e.dependencies.forEach(function(n){window.core.packageMap[n]&&t.push(function(t){i(n,t,e.dependencyReady)})}),s(t,function(t,n){e.done&&e.done(t,n)})):e.done&&e.done()},e.exports=c},function(e,t,n){"use strict";var o=null;o=n(10),e.exports=o},function(e,t,n){"use strict";function o(e){if(this.store={},Object.defineProperty(this,"prefix",{get:function(){return e+".storage"}}),this.originJSON=s[this.prefix],this.originJSON)try{this.store=JSON.parse(this.originJSON)}catch(e){this.originJSON=""}}var i,s={},a="applications-storage.json";try{i=gSTB.LoadUserData(a),s=JSON.parse(i)}catch(e){}window.addEventListener("unload",function(){}),o.prototype.getItem=function(e){return this.store[e]},o.prototype.setItem=function(e,t){var n;try{n=JSON.stringify(t)}catch(e){return}if(this.store[e]=t,n=JSON.stringify(this.store),n!==this.originJSON)return this.originJSON=n,void(s[this.prefix]=this.originJSON)},o.fflush=function(){var e=JSON.stringify(s);if(i!==e)return void window.gSTB.SaveUserData(a,e)},e.exports=o},function(e,t,n){"use strict";var o,i,s=-1,a=n(12),r=n(14),c=n(21),p=n(25),l=n(13),u=n(3),d=null,h=null,f=null,w=null,m=0,g=[],y=function(e,t,n){for(var o=c.data.apps.length,i=0;i<o;){if(c.data.apps[i].packageName===e.config.packageName){if(c.data.apps[i].locked&&window.core.accessControl&&!e.omitLock)return!(!e.ignoreAccessControl||(e.ignoreAccessControl=!1,v.runHistory.forEach(function(t){t.packageName===e.config.packageName&&(e.ignoreAccessControl=!0)}),!e.ignoreAccessControl))||(w=!0,setTimeout(function(){window.core.accessControl.request(function(n){n||(c.data.apps[i].locked=!1,v.runApp(e,t),c.data.apps[i].locked=!0),w=!1})},0),!0);e.config=c.data.apps[i],"undefined"!=typeof c.data.apps[i].pid&&(v.apps[e.config.pid]?n.showSplash=!1:e.config.pid=void 0),s>0&&v.runHistory.length>=s&&v.close(v.apps[v.runHistory[v.runHistory.length-1].pid]);break}++i}return t&&l.events["run:app"]?(v.launcher.$iframe.hide(),v.launcher.core.emit("hide"),v.launcher.core.emit("blur"),v.applicationToShow=e,l.emit("run:app",{done:function(){v.applicationToShow&&(e.omitLock=!0,v.runApp(e))},app:c.data.apps[i]}),!0):n.showSplash?(v.launcher&&(v.launcher.$iframe.hide(),v.launcher.core.emit("hide"),v.launcher.core.emit("blur")),p.show(c.data.apps[i]),v.topApp&&(v.topApp.$iframe.hide(),v.topApp.core.emit("hide",{source:window.core.SOURCES.SYSTEM})),void 0):(v.runHistory=v.runHistory.filter(function(t){return t.packageName!==e.config.packageName}),v.runHistory.push(e.config),v.show(v.apps[e.config.pid]),e.onload&&e.onload(v.apps[e.config.pid]),e.onready&&e.onready(v.apps[e.config.pid]),!0)},v={topApp:null,stack:[],daemons:[],runHistory:[],apps:{},launcher:null,launchers:[],home:null,focusedApp:null,applicationToShow:!1,onDoneCallback:null,show:function(e,t){var n,o=e.config.type;if(t=t||{source:u.prototype.SOURCES.LAUNCHER},this.topApp!==e)switch(o){case"osd":p.active&&p.hide(),n=g.indexOf(e),n===-1?g.push(e):(g.splice(n,1),g.push(e)),g.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),e.$iframe.show();break;case"app":this.launcher&&(this.launcher.$iframe.hide(),this.launcher.core.emit("hide"),this.launcher.core.emit("blur")),d.style.zIndex=window.frames.length;case"system":"system"===o&&(d.style.zIndex=0,e.$iframe.style.zIndex=window.frames.length),n=this.stack.indexOf(e),n!==-1&&this.stack.splice(n,1),this.stack.push(e),this.topApp&&this.topApp!==e&&("function"==typeof this.topApp.core.emit&&this.topApp.core.emit("hide",t),this.topApp&&this.topApp.$iframe.hide()),this.topApp=e,e.$iframe.contentWindow.focus(),v.focusedApp=e,p.active&&p.hide(),e.$iframe.show(),e.core&&"function"==typeof e.core.emit&&(e.core.emit("show",t),e.core.emit("focus",t));break;case"launcher":"launcher"===o&&(v.topApp=null,window.core.pid=e.core.pid),g.forEach(function(e){"auth"===e.config.type&&(e.$iframe.style.zIndex=0)});default:e.$iframe.contentWindow.focus(),e.core.emit("focus",t),e.core.emit("show",t),v.focusedApp=e,e.$iframe.show()}},hide:function(e,t){var n=e.config.type;switch(t=t||{source:u.prototype.SOURCES.LAUNCHER},e.$iframe.hide(),e.core&&"function"==typeof e.core.emit&&e.core.emit("hide",t),n){case"app":case"system":this.topApp===e&&(this.topApp=null),this.stack.pop(),this.stack.length>0?this.show(this.stack.pop(),t):this.show(this.launcher,t)}},close:function(e,t){var o,i,s=c.data.apps.length,a=0;if(null===h&&(h=n(2)),null===f&&(f=n(19)),"undefined"==typeof e)t||this.show(this.launcher);else if("app"===e.config.type){for(e===this.topApp?(this.topApp=null,this.stack.pop()):(i=this.stack.indexOf(e),this.stack.splice(i,1)),e===this.home,e.core&&"function"==typeof e.core.emit&&e.core.emit("exit");a<s;){if(c.data.apps[a].packageName===e.config.packageName){c.data.apps[a]=JSON.parse(JSON.stringify(c.data.apps[a])),c.data.apps[a].pid=void 0,f.replaceActionsConfig(e.config,c.data.apps[a]);break}++a}for(h.destroy(e.window),d.contentDocument.body.removeChild(e.$iframe),o=Object.keys(v.apps),s=o.length,a=0;a<s;){if(v.apps[o[a]]===e){v.apps[o[a]]=null;break}++a}e.config.pid=void 0,e=null,t||this.reset(e)}else this.reset(e)},reset:function(e){for(;this.stack.length;)e=this.stack.pop(),e.$iframe.hide(),e.core.emit("hide",{source:u.prototype.SOURCES.LAUNCHER});this.topApp=null,d.style.zIndex=0,this.show(this.launcher)},runApp:function(e,t){function o(){var t;l&&l.window&&(t=n(2).getInstance(l.window),l.core=t,l.window.pid||(l.window.pid=s),"undefined"==typeof t.call&&(t.storage=new t.constructor.prototype.Storage(e.config.packageName||e.config.name),Object.defineProperty(t,"state",{get:function(){return t.storage.getItem("state")},set:function(e){t.storage.setItem("state",e)}}),"app"===e.config.type?t.call=function(t){var n,o;v.focusedApp&&(n="osd"===v.focusedApp.config.type?v.focusedApp:null),"exit"===t?(v.close(l),o=v.runHistory.indexOf(l.config),o!==-1&&v.runHistory.splice(o,1)):"stop"===t?v.close(l):"app:ready"===t?(e.visible&&p.active&&(v.show(l),n&&n.$iframe.contentWindow.focus(),e.onready&&e.onready(),p.hide()),l.core.emit("app:ready"),p.active&&p.hide()):"hide"===t&&v.hideAll()}:"osd"===e.config.type||"auth"===e.config.type?(t.system=!0,t.config=c.data,t.redirectTo=function(e){window.location.href=e},t.call=function(t){var n;switch(t){case"hide":n=g.indexOf(l),n!==-1&&g.splice(n,1),l.$iframe.style.zIndex="",g.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),l.core.applicationState.visible=!1,l.$iframe.hide(),document.activeElement===document.body&&v.focusedApp!==v.topApp&&v.topApp&&(v.focusedApp=v.topApp,v.focusedApp.$iframe.contentWindow.focus());break;case"app:ready":e.onready&&e.onready();break;case"show":p.active&&p.hide(),n=g.indexOf(l),n===-1?g.push(l):(g.splice(n,1),g.push(l)),g.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),l.core.applicationState.visible=!0,l.$iframe.show(),"auth"===e.config.type&&(v.launcher||(v.launcher=l));break;case"focus":v.topApp?v.topApp.core.emit("blur"):v.launcher&&v.launcher.core.emit("blur"),l.core.applicationState.focused=!0,l.$iframe.contentWindow.focus(),v.focusedApp=l;break;case"blur":if(g.length>0){if(g[g.length-1].$iframe.style.height===window.outerHeight){g[g.length-1].$iframe.contentWindow.focus(),v.focusedApp=g[g.length-1],l.core.applicationState.focused=!0,v.focusedApp.core.emit("focus");break}g.pop()}v.topApp?(g=[],v.topApp.$iframe.contentWindow.focus(),v.focusedApp=v.topApp,v.topApp.core.emit("focus")):v.launcher&&(g=[],v.launcher.$iframe.contentWindow.focus(),v.focusedApp=v.launcher,v.launcher.core.emit("focus"))}},t.dispatchEventToActiveApp=function(e){var t,n,o,i,s=v.topApp||v.launcher,a=0;for(t=document.createEvent("Event"),t.initEvent(e.name,!!e.bubbles,!!e.cancelable),n=Object.keys(e),n=n.filter(function(e){return"bubbles"!==e&&"cancelable"!==e}),o=n.length;a<o;)t[n[a]]=e[n[a]],++a;if("click"===e.name){if(i=s.$iframe.contentDocument.elementFromPoint(e.clientX,e.clientY),!i)return}else i=s.$iframe.contentWindow;i.dispatchEvent(t)}):(t.system=!0,t.config=c.data,t.redirectTo=function(e){window.location.href=e},t.call=function(t){switch(t){case"exit":v.close(l),"launcher"===e.config.type&&n(15).exit();break;case"hide":v.hide(l,{source:u.prototype.SOURCES.SYSTEM});break;case"show":v.show(l,{source:u.prototype.SOURCES.SYSTEM});break;case"app:ready":this.emit("app:ready")}}),t.pid=s),t.resolveDependencies(e.config,function(){t.ready=!0,e.config.home&&(t.applicationState.home=!0),t.emit("load"),e.onload&&e.onload(l)}))}var i={},s=-1,l=null,h={showSplash:!0};if(e.config.legacy)return void(e.config.url.indexOf("?")===-1?window.location.href=e.config.url+"?referrer="+encodeURIComponent(location.href):window.location.href=e.config.url+"&referrer="+encodeURIComponent(location.href));if("app"===e.config.type){if(y(e,t,h))return}else e.config.metrics&&e.config.metrics[screen.height]&&(i.width=e.config.metrics[screen.height].width,i.height=e.config.metrics[screen.height].height,i.top=e.config.metrics[screen.height].top,i.left=e.config.metrics[screen.height].left);return l={$iframe:a({url:e.config.url,type:e.config.type,visible:!1,$container:"app"===e.config.type?d.contentDocument.body:window.document.body,width:i.width,height:i.height,top:i.top,left:i.left,onload:function(){this.contentWindow.addEventListener("keydown",function(e){var t;0!==e.keyCode&&(9===e.keyCode&&e.preventDefault(),t="keydown:"+n(26)(e),r(t,e))}),l.window=this.contentWindow,o()},onerror:function(t){v.close(l),setTimeout(function(){e.visible&&p.active&&p.hide()},5e3),e.onerror&&e.onerror(t)}}),window:null,core:null,config:e.config},v.home&&e.config.home&&(v.home=l),l.core=n(2).getInstance(l.$iframe.contentWindow),"app"===e.config.type&&(v.runHistory=v.runHistory.filter(function(t){return t.url!==e.config.url}),v.home,v.home&&e.config.home?v.runHistory.push(v.home.config):v.runHistory.push(e.config)),"launcher"!==e.config.type&&(s=m,++m,v.apps[s]=l),e.config.pid=s,l},hideAll:function(){var e,t,n,o,i=[];for(v.onDoneCallback=null,v.applicationToShow=null,t=Object.keys(v.apps),e=t.length-1,p.active&&p.hide();e>-1;)v.apps[t[e]]&&(n=v.apps[t[e]].config.type,o=v.apps[t[e]].$iframe.isVisible,v.apps[t[e]].core&&("osd"===n||"auth"===n?o&&v.apps[t[e]].core.emit("hide",{source:u.prototype.SOURCES.LAUNCHER}):"app"===n?(i.push(v.apps[t[e]]),o&&v.apps[t[e]].core.emit("hide",{source:u.prototype.SOURCES.LAUNCHER})):o&&(v.apps[t[e]].$iframe.hide(),v.apps[t[e]].core.emit("hide",{source:u.prototype.SOURCES.LAUNCHER})))),--e;for(e=0;e<i.length;)o=i[e].$iframe.isVisible,o&&(i[e].$iframe.hide(),i[e].core.emit("hide",{source:u.prototype.SOURCES.LAUNCHER})),++e;if(d.style.zIndex=0,v.topApp=null,w){if(v.launcher.$iframe.isVisible)return;v.show(v.launcher),v.launcher.core.emit("focus")}else if(v.home){if(v.home.config.locked)return void(v.launcher.core.applicationState.visibile||(v.show(v.launcher),v.launcher.core.emit("focus")));v.launcher.$iframe.isVisible?v.runHistory.indexOf(this.home.config)!==-1&&(this.launcher&&this.launcher.$iframe.hide(),v.show(v.home)):(v.show(v.launcher),v.launcher.core.emit("focus"))}else v.launcher&&(v.launcher.core.applicationState.focused||v.launcher.core.emit("focus"),v.show(v.launcher))},init:function(){s=c.data.options.maxAppsCounter||s,d=a({$container:document.body,visible:!0,onload:function(){var e=this.contentDocument.head.appendChild(this.contentDocument.createElement("style"));e.textContent="html, body{ background: transparent !important; overflow: hidden; margin: 0; padding:0; width: "+i+"px; height: "+o+"px; } iframe { position: absolute; top: 0; left: 0; border: none; outline: none; overflow: hidden;margin: 0; padding: 0; width: "+i+"px; height: "+o+"px; }",this.contentWindow.parent=null,this.contentWindow.opener=null,this.contentWindow.getCoreInstance=function(e){return n(2).getInstance(e)}}})},lockApp:function(e,t){var n=window.core.storage.getItem("config")||{},o=n.apps||[],i=c.data.apps.length,s=0,a=0;window.core.accessControl?window.core.accessControl.request(function(r){if(!r){for(;s<i;){if(c.data.apps[s].packageName===e.packageName){for(a=s,s=0,i=o.length,c.data.apps[a].locked=!c.data.apps[a].locked;s<i;){if(c.data.apps[a].packageName===o[s].packageName||c.data.apps[a].name===o[s].name){o[s]=c.data.apps[a];break}++s}s===i&&o.push(c.data.apps[a]);break}++s}n.apps=o,window.core.storage.setItem("config",n)}t(r)}):t(!0)},setHomeApp:function(e){null===this.home&&(p.init(),e.home=!0,this.home=this.runApp({config:e,visible:!1,onload:function(){v.launcher.$iframe.hide()}}))},killAll:function(e){var t=Object.keys(v.apps);t.forEach(function(t){var o=v.apps[t];null!==o&&(o.window===e?v.launcher=o:(o.core.emit("exit"),null===h&&(h=n(2)),h.destroy(o.window),"app"===o.config.type?d.contentDocument.body.removeChild(o.$iframe):document.body.removeChild(o.$iframe)))}),this.topApp=this.focusedApp=v.launcher,this.home=null,v.apps={},this.runHistory.splice(0),g.splice(0),this.stack.splice(0),n(10).fflush()}};switch(o=window.screen.height){case 480:case 576:case 720:case 1080:break;default:i=1280,o=720}e.exports=v},function(e,t,n){"use strict";function o(){this.style.display="none",this.isVisible=!1}function i(){this.style.display="",this.isVisible=!0}var s={url:"about:blank",top:0,left:0,visible:"hidden",width:window.innerWidth||screen.width,height:window.innerHeight||screen.height};switch(s.height){case 480:case 576:case 720:case 1080:break;default:s.width=1280,s.height=720}e.exports=function(e){var t,a=document.createElement("iframe");return"function"==typeof e.onload&&(a.onload=e.onload),a.show=i,a.hide=o,a.isVisible=null,a.style.width=e.width||s.width+"px",a.style.height=e.height||s.height+"px",a.style.top=e.top||s.top,a.style.left=e.left||s.left,e.visible?a.show():a.hide(),a.src=e.url||s.url,e.onerror&&(t=new XMLHttpRequest,t.open("HEAD",a.src),t.timeout=1e4,t.onload=function(){200!==this.status&&(0===this.status&&a.src.indexOf("file://")!==-1||e.onerror(this.status))},t.onerror=function(){e.onerror(this.status)},t.ontimeout=function(){e.onerror(this.status)},t.send()),e.$container.appendChild(a),e.type&&"app"!==e.type&&(a.contentWindow.system=n(13)),a.contentWindow.alert=function(){},a}},function(e,t,n){"use strict";var o=n(4),i=new o;e.exports=i},function(e,t,n){"use strict";var o=null,i=27,s=null,a=null,r=null,c=null;e.exports=function(e,t){var p,l,u;n(15);for(null===o&&(o=n(2)),null===s&&(s=n(11)),null===a&&(a=n(19)),null!==c&&s.focusedApp&&c.indexOf(e)!==-1&&t.preventDefault(),null!==i&&e==="keydown:"+i&&(n(13).emit("home"),s.hideAll()),p=0,l=o.coreList.length;p<l;)u=o.coreList[p],u&&u.system&&u.events[e]&&u.emit(e,t),++p;null===r&&(r=n(23).keydown),"function"==typeof r&&r(e,t)}},function(e,t,n){"use strict";var o=null;o=n(16),window.top.platformApi=o,e.exports=o},function(e,t,n){"use strict";var o,i={dvbManager:window.dvbManager,epgManager:window.epgManager,gSTB:window.gSTB,pvrManager:window.pvrManager,stbDownloadManager:window.stbDownloadManager,stbStorage:window.stbStorage,stbUpdate:window.stbUpdate,stbUPnP:window.stbUPnP,stbWebWindow:window.stbWebWindow,stbWindowMgr:window.stbWindowMgr,timeShift:window.timeShift,stbPlayerManager:window.stbPlayerManager,stbEvent:window.stbEvent,exit:function(){window.location.href=n(17)()||"file:///home/web/services.html"}},s=n(7).language,a={};Object.defineProperty(a,"inputLanguage",{set:function(e){s=e,gSTB.SetInputLang(e)},get:function(){return s}}),window.extendCorePrototype("tools",{hash:gSTB.GetHashVersion1,uid:gSTB.GetUID,debug:"function"==typeof window.debug||gSTB.Debug}),window.extendCorePrototype("settings",a),window.extendCorePrototype("device",{model:gSTB.GetDeviceModelExt(),serialNumber:gSTB.GetDeviceSerialNumber(),vendor:gSTB.GetDeviceVendor(),versionHardware:gSTB.GetDeviceVersionHardware(),activeBank:gSTB.GetDeviceActiveBank(),imageDescription:gSTB.GetDeviceImageDesc(),imageVersion:gSTB.GetDeviceImageVersion(),imageVersionCurrent:gSTB.GetDeviceImageVersionCurrent(),mac:gSTB.GetDeviceMacAddress(),memory:o}),e.exports=i},function(e,t,n){"use strict";var o=n(18).parse;e.exports=function(){var e=o(location.search.substring(1));return e.referrer?e.referrer:!!document.referrer&&(location.href.split("#")[0]!==document.referrer&&document.referrer)}},function(e,t){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){e=e.split("="),2===e.length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+"="+encodeURIComponent(e[n]))}),t.join("&")}}},function(e,t,n){"use strict";var o=n(20),i=n(21),s={},a={},r=null,c=null,p=n(3),l={create:function(e,t){return new o(e,t)},route:function(e,t,i){var s,u={runConfig:null,handlerList:null};if(null===c&&(c=n(2)),null===r&&(r=n(11)),l.last=e,e.context){if("undefined"==typeof e.context.pid)e.state=o.prototype.STATE_NOT_RESOLVED;else{if(e.state=o.prototype.STATE_RESOLVED,e.receiver=e.context.pid,e.creator=t.pid,!i&&a["before:"+e.action]&&(a["before:"+e.action].forEach(function(n){n(e,r.apps[t.pid])}),e.state===o.prototype.STATE_PAUSED))return e.continueCallback=function(){l.route(e,t,!0)},u.handlerList=null,u;r.apps[e.context.pid].core.emit("intent",e,function(n,i){a[e.action]&&a[e.action].forEach(function(n){n(e,r.apps[t.pid])}),n?(e.state=o.prototype.STATE_ERROR_RECEIVED,e.callback&&e.callback(n,i)):(e.state=o.prototype.STATE_CONTEXT_RECEIVED,i.pid=e.context.pid,e.addListener("close",function(n){null!==t&&(n&&(r.close(r.apps[t.pid]),t=null,r.show(r.launcher)),t&&t.pid&&r.apps[t.pid]?r.show(r.apps[t.pid],{source:p.prototype.SOURCES.INTENT,data:{intent:e}}):(t=null,r.show(r.launcher)))}),e.callback)})}return u}if(u.handlerList=this.findIntentHandlers(e),u.handlerList.length>0)if(e.state=o.prototype.STATE_RESOLVED,s=u.handlerList[0],"undefined"!=typeof s.pid&&r.apps[s.pid])if(r.apps[t.pid]?e.runnerConfig=r.apps[t.pid].config:e.runnerConfig=r.focusedApp.config,r.apps[s.pid].core){if(e.receiver=s.pid,e.creator=t.pid,!i&&a["before:"+e.action]&&(a["before:"+e.action].forEach(function(n){n(e,r.apps[t.pid])}),e.state===o.prototype.STATE_PAUSED))return r.apps[t.pid].$iframe.hide(),e.continueCallback=function(){e.silent&&r.apps[t.pid].$iframe.show(),l.route(e,t,!0)},u.handlerList=null,u;r.apps[s.pid].core.emit("intent",e,function(n,i){return a[e.action]&&a[e.action].forEach(function(n){n(e,r.apps[t.pid])}),i=i||{},i.pid=s.pid,e.silent?(e.callback&&e.callback(n,i),void e.once("close",function(n){var o;if(n){for(r.apps[t.pid]&&r.close(r.apps[t.pid]);r.stack.length;)o=r.stack.pop(),
o.$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.SYSTEM});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}else if(t&&t.pid&&r.apps[t.pid])r.show(r.apps[t.pid],{source:p.prototype.SOURCES.INTENT,data:{intent:e}});else{for(t=null;r.stack.length;)o=r.stack.pop(),o.$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.INTENT,data:{intent:e}});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}})):void(n?(e.state=o.prototype.STATE_ERROR_RECEIVED,e.callback&&e.callback(n,i)):(e.state=o.prototype.STATE_CONTEXT_RECEIVED,"osd"===r.apps[s.pid].config.type?e.once("close",function(e){e&&t&&t.pid&&r.apps[t.pid]&&(r.topApp&&(r.topApp.$iframe.hide(),r.topApp.core.applicationState.visible=!1,r.topApp.core.applicationState.focused=!1),r.launcher.$iframe.hide(),r.topApp=null,r.show(r.apps[t.pid]))}):(t===r.launcher.core&&r.launcher.$iframe.hide(),t===window.core&&r.launcher.$iframe.hide(),r.show(r.apps[s.pid],{source:p.prototype.SOURCES.INTENT,data:{intent:e}}),e.once("close",function(n){var o;if(n){for(r.apps[t.pid]&&r.close(r.apps[t.pid]);r.stack.length;)o=r.stack.pop(),o.$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.SYSTEM});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}else if(t&&t.pid&&r.apps[t.pid])r.show(r.apps[t.pid],{source:p.prototype.SOURCES.SYSTEM,data:{intent:e}});else{for(t=null;r.stack.length;)o=r.stack.pop(),o.$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.SYSTEM,data:{intent:e}});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}})),e.callback&&e.callback(!1,i)))})}else u.runConfig=s;else u.handlerList=[],u.runConfig=s;else e.state=o.prototype.STATE_NOT_RESOLVED;return u},findIntentHandlers:function(e){var t=[];return s[e.action]&&s[e.action].forEach(function(n){if(e.mime){if(n.actions[e.action]!==!0&&n.actions[e.action].indexOf(e.mime)===-1)return}else if(n.actions[e.action]!==!0)return;t.push(n)}),t},resolveActionsConfig:function(e){var t,n,o,i;if(e.actions)for(t=Object.keys(e.actions),o=t.length,n=0;n<o;)i=t[n],s[i]=s[i]||[],e.pid=null,s[i].push(e),++n},replaceActionsConfig:function(e,t){var n,o,i,a;if(e.actions)for(n=Object.keys(e.actions),i=n.length,o=0;o<i;)a=n[o],o=s[a].indexOf(e),o!==-1&&(s[a][o]=t),++o},addHook:function(e,t){a[e]=a[e]||[],a[e].push(t)},last:null};window.extendCorePrototype("intent",function(e,t){var o,s,a,c=this,p=l.create(e,t);if(e&&e.action)if(o=l.route(p,this),null!==o.runConfig){if(null===r&&(r=n(11)),o.runConfig.pid)for(s=0,a=i.data.apps.length;s<a;){if(i.data.apps[s].url===o.runConfig.url){o.runConfig=i.data.apps[s]=JSON.parse(JSON.stringify(i.data.apps[s]));break}++s}r.runApp({config:o.runConfig,visible:!0,onready:function(){l.route(p,c)}})}else o.handlerList&&o.handlerList.length>1;return p}),window.extendCorePrototype("findIntentHandlers",function(e){return JSON.parse(JSON.stringify(l.findIntentHandlers(e)))}),window.addIntentHook=function(e,t){l.addHook(e,t)},n(13).addListener("home",function(){l.last&&(l.last.continueCallback=null)}),e.exports=l},function(e,t,n){"use strict";function o(e,t){var n;if(this.action=e.action,this.parent=e.parent||null,this.mime=e.mime,this.data=e.data,this.state=o.prototype.STATE_CREATED,this.context=e.context,this.silent=e.silent,this.callback=t,i.call(this,e),e.events)for(n in e.events)e.events[n]&&this.addListener(n,e.events[n])}var i=n(4);o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.STATE_CREATED=0,o.prototype.STATE_RESOLVED=1,o.prototype.STATE_NOT_RESOLVED=2,o.prototype.STATE_CONTEXT_RECEIVED=3,o.prototype.STATE_ERROR_RECEIVED=4,o.prototype.STATE_CLOSED=5,o.prototype.STATE_PAUSED=6,o.prototype.emit=function(e,t){var n,o=this.events[e];if(o)for(n=0;n<o.length;n++)try{o[n].call(this,t)}catch(e){}},o.prototype.close=function(e){this.state=o.prototype.STATE_CLOSED,this.emit("close",e)},o.prototype.show=function(e,t){var o=this,i=n(11),s=n(3),a={source:s.prototype.SOURCES.INTENT,data:{intent:o,config:t}};i.apps[e]?i.topApp.pid!==e&&i.show(i.apps[e],a):(i.topApp&&(i.topApp.$iframe.hide(),i.topApp.core.emit("hide",{source:s.prototype.SOURCES.SYSTEM})),i.show(i.launcher),i.launcher.core.emit("focus"))},o.prototype.pause=function(){this.savedstate=this.state,this.state=o.prototype.STATE_PAUSED},o.prototype.resume=function(){var e=this;setTimeout(function(){e.state=o.prototype.STATE_CREATED,"function"==typeof e.continueCallback&&e.continueCallback()},0)},e.exports=o},function(e,t,n){"use strict";function o(e,t,n){var o=[];"string"==typeof e.url&&"plugin"!==e.type||("plugin"===e.type?e.url&&e.url.indexOf(".js")!==-1?(o.push(e.url),e.path=e.url+"/../"):(o.push(n),o.push(e.packageName),o.push(e.version),o.push(e.uris.app||""),e.path=o.join("/"),o.push(e.uris.entry||"index.js")):e.uris.entry&&e.uris.entry.indexOf("://")!==-1?o.push(e.uris.entry):e.uris.app&&e.uris.app.indexOf("://")>-1?(o.push(e.uris.app),o.push(e.uris.entry)):(o.push(t),o.push(e.packageName),o.push(e.version||""),o.push(e.uris.app||"app"),o.push(e.uris.entry||"index.html")),e.url=o.join("/"))}function i(e,t){var n,i=t.appsPackagesPath,s=Object.keys(e.dependencies||[]),a=s.map(function(t){return e.dependencies[t]}),c=[],p=[];for(s.length>0&&(e.dependencies={},s.forEach(function(t,n){t.indexOf("plugin")!==-1&&(e.dependencies[t]=a[n])})),e.uris=e.uris||{},t.appsPackagesPath.indexOf("://")===-1&&(i=location.href.replace(location.search,"").replace(location.hash,"")+"/"+t.appsPackagesPath),o(e,i,t.pluginsPath),e.options&&(Object.keys(e.options).forEach(function(t){c.push(t+"="+e.options[t])}),c.length>0&&(e.url+="?",e.url+=c.join("&"))),p=e.url.split("/"),n=p.shift()+"/";0===p[0].length;)n+="/",p.shift();return e.url=n+p.filter(Boolean).join("/"),"plugin"!==e.type&&(e.uris.icons=e.uris.icons||{},e.uris.icons[r]&&(e.uris.icons=e.uris.icons[r],e.uris.icons.logoNormal&&e.uris.icons.logoNormal.indexOf("://")===-1&&(p.splice(0),e.uris.app.indexOf("://")>-1?(p.push(e.uris.app),p.push(e.uris.icons.logoNormal)):(p.push(i),p.push(e.packageName),e.version&&p.push(e.version),e.uris.app&&p.push(e.uris.app),p.push(e.uris.icons.logoNormal)),e.uris.icons.logoNormal=p.join("/")),e.uris.icons.logoActive&&e.uris.icons.logoActive.indexOf("://")===-1&&(p.splice(0),e.uris.app.indexOf("://")>-1?(p.push(e.uris.app),p.push(e.uris.icons.logoActive)):(p.push(i),p.push(e.packageName),e.version&&p.push(e.version),e.uris.app&&p.push(e.uris.app),p.push(e.uris.icons.logoActive)),e.uris.icons.logoActive=p.join("/"))),e.colors=e.colors||{},e.colors.splashFont=e.colors.splashFont||"#fff",e.colors.splashBackground=e.colors.splashBackground||"#333"),e.icons=e.icons||{},e}function s(e,t,n){var o,s,a,c,p,l=t?t.apps:[],u={},d=0;for(e.apps||(e.apps=[]),l.forEach(function(e){u[e.packageName||e.name]=e}),l.splice(0),a=e.apps.length,d=0;d<a;)e.apps[d]=i(e.apps[d],e.options),c=e.apps[d].packageName||e.apps[d].name,u[c]&&(e.apps[d].locked=u[c].locked),++d;if(d=0,e.options.themePath)e.theme=e.options.stalkerHost+e.options.themePath.replace("{screen_height}",r+".css"),e.themeVars=e.themes={},n(null,e);else{for(o=Object.keys(e.themes),a=o.length;d<a;)s=e.themes[o[d]],s.indexOf("://")===-1&&(e.options.appsPackagesPath.indexOf("://")===-1?e.themes[o[d]]=location.href.replace(location.search,"").replace(location.hash,"")+"/"+e.options.appsPackagesPath+"/"+o[d]+"/"+s+"/":e.themes[o[d]]=e.options.appsPackagesPath+"/"+o[d]+"/"+s+"/"),++d;e.theme=e.themes[o[0]],p=new XMLHttpRequest,p.onload=function(){if(200===this.status&&this.responseText)try{e.themeVars=JSON.parse(this.responseText)}catch(t){e.themeVars={}}n(null,e)},p.open("GET",e.theme+"src/vars.json"),p.send(),p.onerror=p.ontimeout=function(){n(null,e)}}}var a=n(5),r=window.innerHeight||window.screen.height,c={model:null,version:null};switch(c.version=window.gSTB.GetDeviceImageVersionCurrent().split("-")[0].split(".").map(Number),c.model=window.gSTB.GetDeviceModelExt?window.gSTB.GetDeviceModelExt():window.gSTB.GetDeviceModel(),r=screen.height){case 480:case 576:case 720:case 1080:break;default:r=720}e.exports={systemSettings:{},settings:{},environment:{},data:{},url:null,load:function(e,t){var o,i=n(22),r=this,c=null;o=e.config?e.config:i.indexOf(n(6).language)===-1?"config.en.json":"config."+n(6).language+".json",this.url=o,a([function(e){var t=new XMLHttpRequest;t.onload=function(){var n=!1;try{r.data=JSON.parse(t.responseText)}catch(e){n="config url "+o+"<br>config content: "+t.responseText+"<br>response status "+t.status+"<br>"+e}e(n,r.data)},t.onerror=t.ontimeout=function(){e(this.status+": "+this.responseText)},t.open("GET",o,!0),t.send(null)},function(e){e(!1,window.core.storage.getItem("config"))}],function(e,n){e?t(e):s(n[0],n[1],function(e,n){null!==c&&n.apps.forEach(function(e){c[e.packageName]&&(e.name=c[e.packageName].name,e.description=c[e.packageName].description)}),r.data=n,t()})})}}},function(e,t){"use strict";e.exports=["en","de","el","es","fr","it","nl","pl","ru","sl","uk","hy","ka","bg","tr","pt"]},function(e,t,n){"use strict";var o=null;o=n(24),e.exports=o},function(e,t,n){"use strict";var o=n(4);window.gSTB.GetDeviceModelExt?window.gSTB.GetDeviceModelExt():window.gSTB.GetDeviceModel();window.stbEvent=new o,window.stbEvent.onEvent=function(e,t){try{e=parseInt(e,10)}catch(e){return}if(this.events["media"]){if(t)try{t=JSON.parse(t)}catch(e){t={}}this.emit("media",{code:e,info:t})}},window.stbEvent.onBroadcastMessage=function(e,t,n){this.events["message"]&&this.emit("message",{broadcast:!0,windowId:e,message:t,data:n})},window.stbEvent.onMessage=function(e,t,n){this.events["message"]&&this.emit("message",{broadcast:!1,windowId:e,message:t,data:n})},window.stbEvent.onMediaAvailable=function(e,t){this.events["media:available"]&&this.emit("media:available",{mime:e,url:t})},window.stbEvent.onNetworkStateChange=function(e){this.events["internet:state"]&&this.emit("internet:state",{state:e})},window.stbEvent.onWebBrowserProgress=function(e){this.events["browser:progress"]&&this.emit("browser:progress",{progress:e})},window.stbEvent.onWindowActivated=function(){this.events["window:focus"]&&this.emit("window:focus")},e.exports={unload:function(){},load:function(){},init:function(){window.top.location.href.indexOf("load=true")!==-1&&window.top.stbWebWindow.close(),window.gSTB.SetNativeStringMode&&window.gSTB.SetNativeStringMode(!0)}}},function(e,t,n){"use strict";e.exports={init:function(){},show:function(e){window.splash.style.backgroundImage="url("+e.uris.icons.logoActive+")",window.splash.style.backgroundColor=e.colors.splashBackground,window.splash.style.zIndex="9999",window.splashAppName.innerText=e.name,window.splashAppName.style.color=e.colors.splashFont,window.splashAppVersion.innerText=e.version,window.splash.classList.remove("invisible"),this.active=!0},hide:function(){window.splash.className="container invisible",window.splash.removeAttribute("style"),this.active=!1},active:!1}},function(e,t){"use strict";e.exports=function(e){var t;if(0!==e.keyCode)return t=e.keyCode,e.ctrlKey&&(t+="c"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}},function(e,t,n){"use strict";function o(e){e=e||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.className="widget "+(e.className||""),i.call(this,e)}var i=n(28),s=0;o.prototype=Object.create(i.prototype),o.prototype.constructor=o,e.exports=function(e){var t=new o({focusable:e.focusable,visible:e.visible,events:e.events});return t.className=t.$node.className="widgetClass"+s,e.visible||(t.$node.className="widgetClass"+s+" hidden"),++s,t.$node.style.zIndex=1e3,document.body.appendChild(t.$node),t}},function(e,t,n){"use strict";function o(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,i.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),e.visible===!1&&this.hide(),e.focusable===!1&&(this.focusable=!1),this.defaultEvents){e.events=e.events||{};for(t in this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t]}e.events&&Object.keys(e.events).forEach(function(t){n.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){n.focus(),n.events["click"]&&n.emit("click",e),e.stopPropagation()})}var i=n(4),s=null,a=0;o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.defaultEvents=null,o.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events["add"]&&this.emit("add",{item:e})},o.prototype.remove=function(){this.parent&&(s===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.events={},this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove")},o.prototype.focus=function(e){return!(!this.focusable||this===s)&&(s&&s.blur(),s=this,s.$node.classList.add("focus"),s.events["focus"]&&s.emit("focus",e),!0)},o.prototype.blur=function(){return this.$node.classList.remove("focus"),this===s&&(s=null,this.events["blur"]&&this.emit("blur"),!0)},o.prototype.show=function(e){return!!this.visible||(this.$node.classList.remove("hidden"),this.visible=!0,this.events["show"]&&this.emit("show",e),!0)},o.prototype.hide=function(){return!this.visible||(this.$node.classList.add("hidden"),this.visible=!1,this.events["hide"]&&this.emit("hide"),!0)},e.exports=o},function(e,t,n){"use strict";n(30)},function(e,t,n){"use strict";n(31)},function(e,t){"use strict";if(!document.documentElement.classList){var n=Array.prototype,o=n.indexOf,i=n.slice,s=n.push,a=n.splice,r=n.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<n.length;t++)s.call(this,n[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(s.call(this,e),this._element.className=i.call(this,0).join(" "))},contains:function(e){return o.call(this,e)!==-1},item:function(e){return this[e]||null},remove:function(e){var t=o.call(this,e);t!==-1&&(a.call(this,t,1),this._element.className=i.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,n){"use strict";var o=document.createElement("link"),i=window.innerHeight||window.screen.height;switch(i){case 480:case 576:case 720:case 1080:break;default:i=720}o.rel="stylesheet",o.href="css/release.app."+i+".css",document.head.appendChild(o)},function(e,t){"use strict";e.exports={debug:window.gSTB.Debug,reboot:function(){window.gSTB.ExecAction("reboot")},reload:function(e){var t,n=1,o=window.stbWebWindow.windowId(),i=JSON.parse(window.stbWindowMgr.windowList());for(e=e||"file:///home/web/system/pages/loader/index.html",document.body.style.display="none",window.gSTB.Stop(),window.stbPlayerManager&&window.stbPlayerManager.list.forEach(function(e){e.stop()}),t=0;t<i.result.length;t++)i.result[t]!==n&&i.result[t]!==o&&window.stbWindowMgr.closeWindow(i.result[t]);window.stbStorage.clear(),window.stbWindowMgr.windowLoad(n,e),window.stbWindowMgr.closeWindow(0)}}},function(e,t,n){"use strict";function o(e){var t,n;if(h)switch(t=document.createElement("link"),n=window.innerHeight||window.screen.height){case 480:case 576:case 720:case 1080:break;default:n=720}if(e.core.ready){if(e===c.launcher&&c.home)return void o(c.home);l.hide(),e.config.locked&&window.core.accessControl?window.core.accessControl.request(function(t){t?(l.init(),c.show(c.launcher)):(l.init(),c.show(e))}):(l.init(),c.show(e)),c.daemons.forEach(function(e){e.emit("launcher:ready")}),h&&(t.rel="stylesheet",t.href=window.core.theme.path+n+".css",document.head.appendChild(t))}else e.core.once("app:ready",function(){return e===c.launcher&&c.home?void o(c.home):(l.hide(),e.config.locked&&window.core.accessControl?window.core.accessControl.request(function(t){t?(l.init(),c.show(c.launcher)):(l.init(),c.show(e))}):(l.init(),c.show(e)),c.daemons.forEach(function(e){e.emit("launcher:ready")}),void(h&&(t.rel="stylesheet",t.href=window.core.theme.path+n+".css",document.head.appendChild(t))))})}var i,s,a=n(35),r=n(21),c=n(11),p=n(23),l=n(25),u=[],d=0,h=!0;for(s=r.data.apps.length;d<s;)if(i=r.data.apps[d],"auth"!==i.type){switch(i.type){case"launcher":!function(e){c.launchers.length>0?core.notify({title:"Attention you have 2 launchers in config!!!!",icon:"warning"}):u.push(function(t){setTimeout(function(){c.launcher=c.runApp({config:r.data.apps[e],visible:!1,onload:function(){t(!1,c.launcher)},onerror:function(e){}})},0)}),c.launchers.push(r.data.apps[e])}(d);break;case"system":case"osd":!function(e){setTimeout(function(){c.runApp({config:r.data.apps[e],visible:!1})},0)}(d)}++d}else h=!1,++d;a.parallel(u,function(){p.load&&p.load(),c.home?o(c.home):c.launcher?o(c.launcher):(document.body.style.backgroundColor="#1B5E20 !important",document.body.style.overflow="scroll",document.body.appendChild(document.createElement("pre")),document.body.firstChild.tabIndex=1,document.body.firstChild.style.cssText="overflow-y: scroll; height: "+window.innerHeight||window.screen.height+"px; width: "+window.innerWidth||screen.width+'px;font-family: monospace;font-size: 26px; text-align: left;padding: 20px;color: #f0f0f0;"',document.body.firstChild.innerText="Launcher not found in config: Fatal Exception",document.body.firstChild.focus())})},function(e,t,n){"use strict";e.exports={serial:n(36),parallel:n(5)}},function(e,t){"use strict";e.exports=function(e,t){function n(a){var r=function(a,r){return a?(o=!0,void("function"==typeof t&&t(a))):(s[i]=r,i++,void(i>=e.length&&"function"==typeof t?t(null,s):n(e[i])))};o||(0===a.length?r(null,a()):a(r))}var o=!1,i=0,s=[];e=Array.isArray(e)?e:[],0===e.length?"function"==typeof t&&t(null,s):n(e[0])}}]);
//# sourceMappingURL=release.map