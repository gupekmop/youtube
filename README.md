# Youtube for Stalker/Ministra portal

Все настройки и API ключ в файле apps/magcore-app-youtube/3.0.13/youtube.php

## Обязательные действия:
- Поменять ключ API_KEY на свой
- Решить каким образом получать ссылки на видео для воспроизведения, через php или javascript, далее расшифровано

###JAVASCRIPT - ссылки ищет устройство абонента
- качество видео бывает находит хуже
+ все запросы идут с разных IP абонентов
Дополнительные действия:
- не требуются

###PHP - ссылки ищет ваш сервер
+ качество видео бывает находит лучше
- все запросы идут с одного IP вашего сервера, можно столкнуться с блокировкой при большом кол-ве запросов
Дополнительные действия:
- для папки apps/magcore-app-youtube/3.0.13/cache/ выдать права 0777 (или владелец web-сервер), в ней хранится кеш действий для расшифровки URL лицензионных видео
- переименовать apps/magcore-app-youtube/3.0.13/js/release_php.js в release.js

## Необязательные действия:
### Поиск через API (если ключ с большой квотой):
- Поменять API_SEARCH на true

### Логирование поиска в папку .../logs/:
- Поменять SEARCH_LOGS на true
- Для папки apps/magcore-app-youtube/3.0.13/logs/ выдать права 0777 (или владелец web-сервер)

## Что нового:
15.01.2021
- Столкнулись с проблемой: при получении ссылок на видео через php (т.е. по сути вашим сервером), ютуб блокирует возможность парсинга страницы из-за большого кол-ва запросов с одного ip (просит ввести капчу на странице), поэтому возвращено получение ссылок через javascript (т.е. по сути устройством абонента)

17.12.2020
- Фикс расшифровки URL лиц.видео, работало только первый раз, из кеша не работало

16.12.2020
- Переход воспроизведения с javascript на php (на некоторых видео замечено, что через php ищет качество более лучшее, чем через javascript)
- Ищется максимальное качество видео со звуковой дорожкой, оно и воспроизводится
- Использование множества ключей API убрано